/* =========================================================
   Utilities
   ========================================================= */
.font-xs { font-size: 0.75rem !important; }

/* =========================================================
   Root layout
   ========================================================= */
html,body,#root,.app-container{height:100%;min-height:0;margin:0;padding:0}
html,body{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}
.app-container{display:flex;flex-direction:column;height:100%;width:100%;overflow:hidden}

:root[data-mantine-color-scheme='light'] {
    --tab-close-fg: #333;
    --tab-close-bg: rgba(0,0,0,.06);
    --tab-close-ring: rgba(0,0,0,.15);
    --tab-close-bg-active: rgba(0,0,0,.10);
}

:root[data-mantine-color-scheme='dark'] {
    --tab-close-fg: #ddd;
    --tab-close-bg: rgba(255,255,255,.10);
    --tab-close-ring: rgba(255,255,255,.18);
    --tab-close-bg-active: rgba(255,255,255,.16);
}

/* =========================================================
   HomePage
   ========================================================= */
.home-page-container{
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

/* =========================================================
   Navbar
   ========================================================= */
.thin-navbar{max-height:calc(5vh * var(--ui-scale));padding:0!important;font-size:.875rem;z-index:2000}

/* =========================================================
   Zone Tabs
   ========================================================= */
/* Base Mantine tab layout */
.mantine-Tabs-tab {
    display: inline-flex;
    align-items: center;
    gap: 8px;
}

/* Label text inside the tab */
.tab-label {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 22ch;
}

/* Active underline accent */
.tab-active-accent {
    position: absolute;
    left: 8px;
    right: 8px;
    bottom: -1px;
    height: 3px;
    border-radius: 3px 3px 0 0;
    background: #3a82f7;
}

/* Category-tinted accents */
.tab--editor .tab-active-accent {
    background: #f7c23a;
}

.tab--plot .tab-active-accent {
    background: #8bc34a;
}

.tab--panel .tab-active-accent {
    background: #9c27b0;
}

/* =========================================================
   Center zone tabs
   ========================================================= */
.wizard-workspace{display:flex;flex-direction:column;width:100%;height:100%;min-height:0;overflow:hidden}

.wizard-tab-body{flex:1 1 auto;min-height:0;display:flex;background:inherit;overflow:auto}
.wizard-tab-body>*{flex:1 1 0;min-width:0}

/* =========================================================
   Wizard / Manual Entry (unchanged from your version)
   ========================================================= */
.wizard-grid{display:grid;grid-template-columns:max-content 1fr;column-gap:.5rem;row-gap:.5rem;align-items:center}
.wizard-grid .form-group.row{display:contents}
.wizard-grid .form-group.row>.col-auto{grid-column:1}
.wizard-grid .form-group.row>.col{grid-column:2;min-width:0}
.wizard-grid .col-form-label,.wizard-grid .wizard-label-fixed{white-space:nowrap}
.wizard-grid textarea{width:100%}
.wizard-footer{flex-shrink:0;width:100%;padding:10px 16px;border-top:1px solid #333;display:flex;justify-content:flex-end;align-items:center;background:inherit}

/* =========================================================
   Manual Data Entry Editor
   ========================================================= */
.manual-entry-content{flex:1 1 0;min-height:0;max-height:100%;max-width:100%;overflow-y:auto;display:flex;flex-direction:column;margin:0;padding:0;border:none}
.manual-entry-content > legend + * {margin-top: var(--mantine-spacing-md);}
.manual-entry-content > legend {display: block;}

.manual-entry-row{display:flex;align-items:center;gap:.5rem;margin-bottom:.5rem}
.manual-entry-label{min-width:90px;font-size:.875rem;line-height:1.2;margin-bottom:0;text-align:left;white-space:nowrap}
.manual-entry-field{flex:1 1 0;min-width:0}
.manual-entry-field textarea{width:100%;box-sizing:border-box}
.manual-entry-table{width:300px;min-width:0;table-layout:fixed;font-size:.8em;background:#222;border-collapse:collapse;color:#eee}
.manual-entry-input{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}

.manual-entry-table th,.manual-entry-table td{border:1px solid #444}
.manual-entry-input.selected {
    background-color: #444;
    border: 1px solid var(--mantine-color-blue-filled);
}

.manual-entry-input[type=number]::-webkit-outer-spin-button,
.manual-entry-input[type=number]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}

/* =========================================================
   Misc
   ========================================================= */
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}

.wizardFrame {
    display: flex;
    flex-direction: column;
    height: 100%;
    min-height: 0;
}

.wizardStack {
    display: flex;
    flex-direction: column;
    flex: 1;
    min-height: 0;
}

.wizardBody {
    flex: 1;
    min-height: 0;
    overflow: auto;
    padding: var(--mantine-spacing-sm);
}

.editor-scroll {
    flex: 1;
    min-height: 0;
}

.wizard-body {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.summary-root {
    flex: 1 1 auto;
    min-height: 0;
    display: flex;
    flex-direction: column;
}

.summary-scroll {
    flex: 1 1 auto;
    min-height: 0;
}

/* =========================================================
   Table Right Click Menu
   ========================================================= */
.table-right-click-menu {
    position: fixed;
    z-index: 1000;
    width: auto;
    min-width: 140px;
    max-width: 260px;
    overflow: hidden;
    color: var(--mantine-color-text);
}

.table-resizable th {
    position: relative;
}

.table-resizable .th-inner {
    padding-right: 4px;
}

.table-resizable .col-resizer {
    position: absolute;
    top: 0;
    right: 0;
    width: 4px;
    height: 100%;
    cursor: col-resize;
    user-select: none;
}

.flow-ranges-plot {
    display: flex;
    flex-direction: column;
    min-height: 0;
}

.flow-ranges-group {
    flex: 0 0 auto;
}

.scroll-area {
    height: 100%;
    min-height: 0;
}

/* Root grid */
.flowranges-root {
    height: 100%;
    min-height: 0;
    display: grid;
    grid-template-columns: 1fr 1.2fr;
    gap: 12px;
}

/* Left column */
.flowranges-left {
    height: 100%;
    min-height: 0;
    display: grid;
    grid-template-rows: auto auto 1fr;
    gap: 10px;
}

/* Apply button row */
.flowranges-actions {
    flex: 0 0 auto;
}

/* FlowRanges table wrapper */
.flowranges-table-wrap {
    height: 100%;
    min-height: 0;
}

/* Right column (plot) */
.flowranges-right {
    height: 100%;
    min-height: 0;
}

/* Mantine ScrollArea fixes */
.flowranges-viewport {
    height: 100%;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.flowranges-viewport-inner {
    height: 100%;
    min-height: 0;
    flex: 1 1 auto;
    display: flex;
    flex-direction: column;
}

.popoutHostRoot {
    padding: 10px;
    height: 100vh;
    box-sizing: border-box;
}

.popoutHostStack {
    height: 100%;
}

.popoutHostHeader {
    flex: 0 0 auto;
}

.popoutHostTitle {
    font-weight: 600;
}

.popoutHostBody {
    flex: 1 1 auto;
    min-height: 0;
}

.popoutHostWaiting {
    opacity: 0.7;
}
